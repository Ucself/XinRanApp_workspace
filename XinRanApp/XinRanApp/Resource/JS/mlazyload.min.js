(function(window){var doc=window.document;function LazyLoad(){this.options={selector:"img.lazy-img",holder:"_src"}}LazyLoad.prototype.init=function(selector,holder){var self=this,o=self.options;if(arguments.length==1&&typeof selector=="object"){for(var attr in selector){o[attr]=selector[attr]}}else{selector&&(this.options.selector=selector);holder&&(this.options.holder=holder)}self.imgs=Array.prototype.slice.call(doc.querySelectorAll(o.selector),0);self._show();window.addEventListener("scroll",function(event){self._show()})};LazyLoad.prototype._show=function(){var self=this,imgs=self.imgs;for(var i=0;i<imgs.length;i++){var node=imgs[i];if(!node.getAttribute("loaded")&&self._inView(node)){self.load(node)}}};LazyLoad.prototype._inView=function(node){var o=this.options,min=window.pageYOffset-Math.floor(window.innerHeight/2),max=window.pageYOffset+Math.floor(window.innerHeight*1.5),rect=node.getBoundingClientRect(),top=rect.top+window.pageYOffset;return top>=min&&top<=max};LazyLoad.prototype.load=function(node){var href=node.getAttribute(this.options.holder),img=new Image();node.style.opacity=0.5;console.log(node.style.opacity);img.addEventListener("load",function(){node.setAttribute("src",href);node.style.setProperty("-webkit-transition","600ms");node.style.setProperty("-moz-transition","600ms");node.style.setProperty("-ms-transition","600ms");node.style.setProperty("transition","600ms");node.style.opacity=1});img.src=href;node.setAttribute("loaded","true")};window.LazyLoad=new LazyLoad()}(window));
